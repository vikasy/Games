<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <a href="../index.html" class="back">&larr; All Games</a>
    <header>
        <h1>TIC TAC TOE</h1>
        <p>Player vs Computer</p>
    </header>

    <!-- Help Modal -->
    <div id="rules-modal" class="rules-modal" style="display:none">
        <div class="rules-modal-content">
            <button id="rules-close" class="rules-close">&times;</button>
            <div class="modal-tabs">
                <button class="modal-tab active" data-tab="tab-rules">Game Rules</button>
                <button class="modal-tab" data-tab="tab-tips">Tips &amp; Tricks</button>
                <button class="modal-tab" data-tab="tab-terms">Terminology</button>
                <button class="modal-tab" data-tab="tab-math">The Math</button>
            </div>

            <div id="tab-rules" class="modal-tab-panel active">
                <p>Welcome to Tic Tac Toe! Here's how to play:</p>
                <ol>
                    <li><strong>Pick your grid size</strong> (3&times;3, 4&times;4, or 5&times;5) and press <strong>New Game</strong>.</li>
                    <li>You are <strong>X</strong> and the computer is <strong>O</strong>. Take turns placing your mark on empty squares.</li>
                    <li>Get a full row, column, or diagonal of your mark to <strong>win!</strong></li>
                    <li>If the board fills up with no winner (or no one can win), it's a <strong>draw</strong>.</li>
                </ol>
            </div>

            <div id="tab-tips" class="modal-tab-panel">
                <ol>
                    <li>Grab the <strong>center</strong> square first &mdash; it's part of the most winning lines!</li>
                    <li><strong>Corners</strong> are the next best spots. They connect to 3 lines (row, column, and diagonal).</li>
                    <li>Watch out for <strong>forks</strong> &mdash; if you can set up two ways to win at once, your opponent can't block both!</li>
                    <li>Always <strong>block</strong> your opponent if they have two in a row.</li>
                    <li>On a 3&times;3 board, two perfect players will always draw. Try the MiniMax brain to learn why!</li>
                </ol>
            </div>

            <div id="tab-terms" class="modal-tab-panel">
                <dl class="term-list">
                    <dt>Row / Column / Diagonal</dt>
                    <dd>The three directions you can line up marks to win.</dd>
                    <dt>Fork</dt>
                    <dd>A clever move that creates <strong>two</strong> ways to win at the same time &mdash; your opponent can only block one!</dd>
                    <dt>Block</dt>
                    <dd>Placing your mark to stop the other player from completing a line.</dd>
                    <dt>Draw (Tie)</dt>
                    <dd>When the board fills up and nobody wins, or when no winning line is left for either player.</dd>
                    <dt>Newell &amp; Simon</dt>
                    <dd>A step-by-step strategy from 1972. The computer follows a checklist of rules (win &rarr; block &rarr; fork &rarr; center &rarr; corner &rarr; side).</dd>
                    <dt>MiniMax</dt>
                    <dd>An algorithm where the computer imagines <em>every</em> possible future move, all the way to the end, and picks the one with the best outcome.</dd>
                    <dt>Toss</dt>
                    <dd>A coin-flip to decide who goes first &mdash; you or the computer.</dd>
                </dl>
            </div>

            <div id="tab-math" class="modal-tab-panel">
                <h4>The Numbers</h4>
                <p>A 3&times;3 board has <strong>9</strong> squares. The total number of ways to fill them is 9! = <strong>362,880</strong>. But many of those games end early (someone wins), so there are about <strong>255,168</strong> possible games. If you ignore symmetry (rotations and reflections), only <strong>138</strong> unique endings exist!</p>
                <p>A 3&times;3 board has <strong>8</strong> winning lines: 3 rows + 3 columns + 2 diagonals. A 4&times;4 board has <strong>10</strong>, and a 5&times;5 board has <strong>12</strong>.</p>
                <h4>Why MiniMax Always Draws</h4>
                <p>MiniMax explores every branch of the game tree. On a 3&times;3 board, if both players use MiniMax, every path leads to a draw. That means tic-tac-toe is a <strong>solved game</strong> &mdash; perfect play from both sides always ties!</p>
                <p>Click the <strong>üñ• Computer Brain</strong> button to see how each algorithm works step by step.</p>
            </div>
        </div>
    </div>

    <!-- Computer Brain Modal -->
    <div id="computer-modal" class="rules-modal" style="display:none">
        <div class="rules-modal-content">
            <button id="computer-close" class="rules-close">&times;</button>
            <h3>Computer Brain</h3>
            <p class="modal-intro">Choose which algorithm the computer uses, and watch it think!</p>

            <div class="brain-picker">
                <label class="brain-option">
                    <input type="radio" name="brain-pick" value="newell-simon" checked />
                    <div class="brain-card">
                        <span class="brain-card-icon">üìã</span>
                        <strong>Newell &amp; Simon</strong>
                        <span class="brain-card-desc">Follows a checklist of rules (win &rarr; block &rarr; fork &rarr; center &rarr; corner). Fast and simple!</span>
                    </div>
                </label>
                <label class="brain-option">
                    <input type="radio" name="brain-pick" value="minimax" />
                    <div class="brain-card">
                        <span class="brain-card-icon">üß†</span>
                        <strong>MiniMax</strong>
                        <span class="brain-card-desc">Imagines every possible future move and picks the best one. Unbeatable on 3&times;3!</span>
                    </div>
                </label>
            </div>

            <div id="brain-detail-ns" class="brain-detail">
                <h4>How Newell &amp; Simon Works</h4>
                <p>Instead of imagining every possible game, this strategy uses a <strong>priority checklist</strong>. On each turn the computer goes down the list and picks the first rule that applies:</p>
                <ol>
                    <li><strong>Win:</strong> If there's a square that completes a line of O's &mdash; take it!</li>
                    <li><strong>Block:</strong> If the opponent has two X's in a line with one empty &mdash; block it!</li>
                    <li><strong>Fork:</strong> Find a square that creates two winning threats at once.</li>
                    <li><strong>Block fork:</strong> Stop the opponent from creating a fork.</li>
                    <li><strong>Center:</strong> Take the center square if it's open.</li>
                    <li><strong>Opposite corner:</strong> If the opponent is in a corner, take the opposite one.</li>
                    <li><strong>Any corner:</strong> Grab any empty corner.</li>
                    <li><strong>Any side:</strong> Take whatever's left.</li>
                </ol>
                <h4>The Numbers</h4>
                <p>A 3&times;3 board has <strong>9</strong> squares. Total ways to fill them: 9! = <strong>362,880</strong>. But many games end early, so there are about <strong>255,168</strong> possible games. Ignoring symmetry, only <strong>138</strong> unique endings exist!</p>
                <p>Winning lines: 3&times;3 has <strong>8</strong> (3 rows + 3 columns + 2 diagonals), 4&times;4 has <strong>10</strong>, 5&times;5 has <strong>12</strong>.</p>
                <p class="brain-detail-note">This algorithm is fast but not perfect &mdash; on larger boards it can sometimes be tricked. Try to beat it!</p>
            </div>

            <div id="brain-detail-mm" class="brain-detail" style="display:none">
                <h4>How MiniMax Works</h4>
                <p>The computer plays the <strong>"What If"</strong> game &mdash; it imagines placing O on every empty square, then pretends to be you and picks your best reply, then switches back&hellip; all the way to the end of the game.</p>
                <p>Each ending gets a <strong>score</strong>: win = üòÑ, draw = üòê, loss = üò∞. The computer picks the move with the happiest ending, even if you play perfectly.</p>
                <p>Why "MiniMax"? One player <strong>max</strong>imizes the score, the other <strong>mini</strong>mizes it &mdash; like a tug of war!</p>
                <p class="brain-detail-note">On a 3&times;3 board, MiniMax is <strong>unbeatable</strong> &mdash; the best you can do is a draw. Try it!</p>

                <div class="minimax-controls">
                    <button id="modal-learning-btn" class="icon-toggle" title="Watch the computer think step by step">
                        <span class="icon-toggle-icon">üß†</span>
                        <span class="icon-toggle-label">See Computer Think</span>
                    </button>
                    <button id="modal-play-as-btn" class="icon-toggle" title="Pick O's moves yourself and compare">
                        <span class="icon-toggle-icon">üéØ</span>
                        <span class="icon-toggle-label">Play as Computer</span>
                    </button>
                </div>
                <p id="minimax-controls-note" class="modal-note" style="display:none">These features only work on 3&times;3 boards.</p>
            </div>
        </div>
    </div>

    <div class="controls">
        <label for="dim-select">Grid:</label>
        <select id="dim-select">
            <option value="3">3 &times; 3</option>
            <option value="4">4 &times; 4</option>
            <option value="5">5 &times; 5</option>
        </select>
        <label for="timer-mode">Clock:</label>
        <select id="timer-mode">
            <option value="unlimited">Unlimited time</option>
            <option value="5">5 minute timer</option>
        </select>
        <label for="ai-select">Brain:</label>
        <select id="ai-select">
            <option value="newell-simon">Newell &amp; Simon</option>
            <option value="minimax">MiniMax</option>
        </select>
    </div>

    <div id="status"></div>

    <div class="board-layout">
        <div class="move-column">
            <div class="player-avatar x" aria-hidden="true">ü¶ä</div>
            <div class="player-label">You (X)</div>
            <strong class="column-timer" id="timer-x">
                <svg viewBox="0 0 36 36" class="clock-icon">
                    <circle cx="18" cy="18" r="16" />
                    <line x1="18" y1="18" x2="18" y2="8" />
                    <line x1="18" y1="18" x2="25" y2="18" />
                </svg>
                <span class="timer-text">00:00</span>
            </strong>
            <ol id="move-list-left" class="move-list">
                <li>No moves yet. Start a game!</li>
            </ol>
        </div>
        <div class="board-center">
            <div id="board"></div>
        </div>
        <div class="move-column">
            <div class="player-avatar o" aria-hidden="true">ü¶â</div>
            <div class="player-label">Computer (O)</div>
            <strong class="column-timer" id="timer-o">
                <svg viewBox="0 0 36 36" class="clock-icon">
                    <circle cx="18" cy="18" r="16" />
                    <line x1="18" y1="18" x2="18" y2="8" />
                    <line x1="18" y1="18" x2="26" y2="22" />
                </svg>
                <span class="timer-text">00:00</span>
            </strong>
            <ol id="move-list-right" class="move-list">
                <li>No moves yet. Start a game!</li>
            </ol>
        </div>
    </div>

    <div class="game-actions">
        <button id="rules-btn" class="action-icon-btn rules-btn" title="How to Play">?</button>
        <button id="new-game">New Game</button>
        <button id="toss-btn" class="toss-button">Toss</button>
        <span id="toss-result" class="toss-result">Player (X) starts</span>
        <button id="computer-btn" class="action-icon-btn computer-btn" title="Computer Brain">üñ•</button>
    </div>

    <div class="scoreboard">
        <div class="score-item">
            <div class="label">You (X)</div>
            <div class="value x" id="score-x">0</div>
        </div>
        <div class="score-item">
            <div class="label">Computer (O)</div>
            <div class="value o" id="score-o">0</div>
        </div>
        <div class="score-item">
            <div class="label">Draws</div>
            <div class="value d" id="score-d">0</div>
        </div>
    </div>

    <div class="board-history-panel" id="history-panel">
        <h3 id="history-panel-title">Game Rules</h3>
        <div id="game-rules-inline">
            <p>Welcome to Tic Tac Toe! Here's how to play:</p>
            <ol>
                <li><strong>Pick your grid size</strong> (3&times;3, 4&times;4, or 5&times;5) and press <strong>New Game</strong>.</li>
                <li>You are <strong>X</strong> and the computer is <strong>O</strong>. Take turns placing your mark on empty squares.</li>
                <li>Get a full row, column, or diagonal of your mark to <strong>win!</strong></li>
                <li>If the board fills up with no winner (or no one can win), it's a <strong>draw</strong>.</li>
            </ol>
            <p><strong>Tips &amp; Tricks:</strong></p>
            <ul>
                <li>Grab the <strong>center</strong> square first ‚Äî it's part of the most winning lines!</li>
                <li><strong>Corners</strong> are the next best spots. They connect to 3 lines (row, column, and diagonal).</li>
                <li>Watch out for <strong>forks</strong> ‚Äî if you can set up two ways to win at once, your opponent can't block both!</li>
                <li>Always <strong>block</strong> your opponent if they have two in a row.</li>
                <li>On a 3&times;3 board, two perfect players will always draw. Try the <strong>MiniMax</strong> section below to learn why!</li>
            </ul>
            <p><strong>Fun math:</strong> A 3&times;3 board has 255,168 possible games, but only 138 unique endings when you ignore symmetry!</p>
        </div>
        <div id="board-history" style="display:none">No completed games yet.</div>
    </div>

    <section class="learning-panel" id="learning-panel">
        <h3>How the Computer Thinks</h3>
        <div class="learning-icon-bar">
            <button id="learning-mode-btn" class="icon-toggle" title="Show how the computer thinks (3√ó3 only)">
                <span class="icon-toggle-icon">üß†</span>
                <span class="icon-toggle-label">See Computer Think</span>
            </button>
            <button id="play-as-computer-btn" class="icon-toggle" title="Pick O's moves yourself and compare with MiniMax">
                <span class="icon-toggle-icon">üéØ</span>
                <span class="icon-toggle-label">Play as Computer</span>
            </button>
        </div>
        <input type="checkbox" id="learning-mode" style="display:none" />
        <input type="checkbox" id="play-as-computer" style="display:none" />
        <div id="coach-feedback" class="coach-feedback" style="display:none"></div>
        <div id="learning-note" class="learning-note"></div>
        <div id="learning-log" class="learning-log">
            Click a button above during a 3 &times; 3 game to see the computer's pretend moves.
        </div>
        <div id="learning-tree" class="learning-tree"></div>
        <div id="learning-intro-content" class="learning-intro-content">
            <p class="learning-intro">
                Have you ever played the <strong>"What If"</strong> game in your head?
                <em>"If I go here&hellip; they'll probably go there&hellip; then I could go&hellip;"</em>
                That's exactly what the computer does &mdash; except it checks <strong>every single possibility</strong>,
                all the way to the end of the game, in a split second!
                On an empty 3&times;3 board that's up to <strong>362,880</strong> different game paths to explore.
                By the middle of the game there might still be hundreds. The computer plays them all out in its head!
            </p>
            <p class="learning-intro">
                This trick has a name: <strong>MiniMax</strong>. Here's the idea:
            </p>
            <ol class="learning-steps">
                <li>The computer looks at each empty square and pretends to place an <strong>O</strong> there.</li>
                <li>Then it pretends to be <em>you</em> and picks <strong>your</strong> best reply.</li>
                <li>Then it switches back to being the computer, picks <em>its</em> best reply&hellip; and so on, all the way until the game ends.</li>
                <li>Each ending gets a <strong>score</strong>: winning = happy face, losing = sad face, draw = okay face.</li>
                <li>The computer picks the square where, <em>even if you play perfectly</em>, it still gets the happiest ending.</li>
            </ol>
            <p class="learning-intro">
                Why "MiniMax"? Because one player tries to make the score as <strong>big</strong> as possible
                (<strong>max</strong>imize), and the other tries to make it as <strong>small</strong> as possible
                (<strong>mini</strong>mize). They take turns &mdash; max, min, max, min &mdash; like a tug of war!
            </p>
            <p class="learning-intro learning-funfact">
                <strong>Fun fact:</strong> On a 3&times;3 board, if both players use MiniMax, every game ends in a draw.
                Nobody can ever win! Click the buttons above and watch the computer think out loud.
            </p>
        </div>
    </section>

    <footer class="copyright" style="margin-top:32px;color:#555;font-size:0.75rem;text-align:center;">&copy; 2017-2026 Vikas Yadav. All rights reserved.</footer>
    <script src="game.js"></script>
    <script src="../feedback.js"></script>
</body>
</html>
